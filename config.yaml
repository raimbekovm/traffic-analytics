# Traffic Analytics Pipeline Configuration

video:
  source_type: hls  # file, rtsp, http, hls, youtube
  source: https://stream.kt.kg:5443/live/camera27.m3u8
  output_path: output/result.mp4
  show_display: true
  frame_skip: 1

detection:
  model: yolo26l
  confidence: 0.25
  classes: [2, 3, 5, 7]  # COCO: car, motorcycle, bus, truck
  device: mps  # cpu, cuda, mps
  imgsz: 1280
  crop:
    top: 0.4
    left: 0.15
    bottom: 0.0
    right: 0.0

tracking:
  tracker: bytetrack
  track_buffer: 30

counting:
  enabled: true
  lines:
    - name: Line 1
      start: [420, 692]
      end: [696, 648]
      color: [0, 255, 255]
  in_direction: [0, 1]

visualization:
  show_boxes: true
  show_trajectories: true
  trajectory_length: 30
  show_ids: true
  show_labels: true
  show_confidence: false
  show_fps: true
  show_stats: true
  box_thickness: 2
  font_scale: 0.6

speed:
  enabled: true
  calibration_file: calibration.json
  speed_limit: 60

output:
  save_events: true
  events_path: output/events.json
  log_interval: 10

violations:
  enabled: true
  solid_lines:
    - name: Solid Line 1
      points: [[347, 450], [397, 643], [508, 983], [540, 1072]]
      color: [0, 0, 255]
    - name: Solid Line 2
      points: [[1137, 1070], [800, 750], [697, 647], [589, 535], [515, 457]]
      color: [0, 0, 255]
    - name: Solid Line 3
      points: [[824, 1071], [690, 876], [578, 703], [507, 587], [455, 499], [427, 447]]
      color: [0, 0, 255]
